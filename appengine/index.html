<!DOCTYPE html>
{% autoescape ture %}
<html>
<head>
<title>qcl's Arduino Thermometer</title>
<meta charset="utf-8" >
<style>
div.content{
    width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.thermometer{
    margin-top: 3em;
    margin-bottom: 3em;
}

.temp{
    float: left;
    font-size: 6em;
    margin-left: 40%;
}

.degree{
    float: left;
    font-size: 1.5em;
    margin-top: 0.75em;
}

.humi{
    float: left;
    position: relative;
    left: -1em;
    bottom: -5em;
}

.update{
    text-align: center;
    margin-bottom: 3em;
}

</style>
</head>
<body>
<div class="content">
<h1>qcl's Arduino Thermometer</h1>
<hr />
<div>
    <div class="thermometer">
        <span class="temp" id="temperature">00</span><span class="degree">Â°C</span>
        <span class="humi">
        <span id="humidity">00</span><span class="percent">%</span>
        </span>
    </div>
</div>
<hr style="clear:both;width:45%"/>
<p class="update" >Update: <span id="update">2014-09-27 15:30:00</span></p>
<!--<h2>Recent</h2>-->
</div>
<script src="//code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
<script>
$(function(){

        var $t = $("#temperature");
        var $h = $("#humidity");
        var $d = $("#update");

        $.ajax({
            url:"/current",
            method:"GET",
            success:function(dht){
                console.log("call api /current success");
                $t.html(dht.temperature);
                $h.html(dht.humidity);
                $d.html(dht.date);
            },
            error:function(){
                console.log("call api /current fail");
                $t.html("N/A");
                $h.html("N/A");
                $d.html("Unknow");
            }
        });
        
});

</script>
</body>
</html>
{% endautoescape %}
